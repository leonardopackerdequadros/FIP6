{
  "hash": "aed203e3a7c7b84095fe38b4d7f55ea5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Mapas\"\nformat: html\neditor: visual\nexecute: \n  error: false\n  warning: false\n---\n\n\nA apresentação de mapas, dependendo do estudo em fitopatologia, é um elemento gráfico essencial que compõe a localização geográfica de ensaios, objetos de estudo e isolados de um determinado patógeno. Além disso, permite determinar características ambientais favoráveis à incidência de uma doença e visualizar padrões espaciais e/ou temporais das mesmas. O Softwware R é uma ótima opção para realizar mapas interativos ou que carreguem alto nível de informação. Apresenderemos aqui como realizar mapas se utilizando dos pacotes `rnaturalearth`,`rnaturalearthhires`, `ggspatial`, `scatterpie` e `ggrepel`.\n\n#### Carregamento dos pacotes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggthemes)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthhires) # necessário para instalar pacotes que se encontram apenas no github \nlibrary(r4pde)\nlibrary(ggspatial)\nlibrary(leaflet)\nlibrary(ggrepel)\nlibrary(scatterpie)\nlibrary(gsheet)\nlibrary(DT)\n```\n:::\n\n\n## Mapas Estáticos\n\n## Mapa de um País\n\nUtilização dos Pacotes `rnaturalearth`, `rnaturalearthhires` e `ggspatial`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## criação do objeto \nworld <- ne_countries()\nBRA <- ne_states(country = \"Brazil\", returnclass = \"sf\")\n\n## definindo o tema dos mapas\ntheme_set(theme_map() + \n          theme(text = element_text(family = \"serif\", face = \"bold\", size = 12)))\n\n## plot do mapa\nggplot(BRA) +\n  geom_sf(fill = \"grey70\", color = \"white\", linewidth = 0.5) +\n  annotation_north_arrow(which_north = \"grid\") +\n  labs(x = \"\", y = \"\", title = \"Mapa do Brasil\", caption = \"Fonte: Leonardo Packer de Quadros\")\n```\n\n::: {.cell-output-display}\n![](Mapas_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Mapa destacando um Estado\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## criação do objeto\nBRA <- ne_states(country = \"Brazil\",\n                 returnclass = \"sf\")\n\nMG <- BRA |> \n  filter(name_en == \"Minas Gerais\")\n\n## plot do mapa \nggplot(BRA) +\n  geom_sf(fill = \"grey70\", color = \"white\", linewidth = 0.5) +\n  geom_sf(data = MG, fill = \"grey20\") +\n  annotation_north_arrow(which_north = \"grid\") +\n  labs(x = \"\", y = \"\", title = \"Mapa do Brasil com destaque ao Estado de Minas Gerais\", caption = \"Fonte: Leonardo Packer de Quadros\")\n```\n\n::: {.cell-output-display}\n![](Mapas_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Mapa de um Estado\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## criação do objeto \nMG <- BRA |> \n  filter(name_en == \"Minas Gerais\")\n\n## plotando o mapa \nggplot(MG) +\n  geom_sf(fill = \"grey70\", color = \"white\", linewidth = 0.5) +\n  annotation_north_arrow(which_north = \"grid\") +\n  labs(x = \"\", y = \"\", title = \"Mapa do Estado de Minas Gerais\", caption = \"Fonte: Leonardo Packer de Quadros\")\n```\n\n::: {.cell-output-display}\n![](Mapas_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Mapa com pontos nas coordenadas de Incidência de Ferrugem da Soja no Brasil\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Utilização dos data frame do pacote r4pde\n\n## criação do objeto\nsbr<-RustSoybean\n\nggplot(BRA) +\n  geom_sf(fill = \"grey70\", color = \"white\", linewidth = 0.5)+\n  annotation_north_arrow(which_north = \"grid\") +\n  labs(x = \"\", y = \"\", title = \"Localização das Incidências de Ferrugem da Soja\", caption = \"Fonte: Leonardo Packer de Quadros\")+\n  geom_point(data = sbr, aes(longitude, latitude), color = \"#e05e00\")\n```\n\n::: {.cell-output-display}\n![](Mapas_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Mapa com gráficos de pizza de incidência de doenças da soja nas localidades\n\nUtilização dos pacotes `ggrepel` e `scatterpie`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## carregando o data frame\nincidencia_doenças_soja <- gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1pAIFKsdKxk_UQQXdYwIO-O5NOkYNhpclImJcLziYnk4/edit#gid=50258992\")\n\ndatatable(incidencia_doenças_soja)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-ea2a58f782c1647e24e6\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ea2a58f782c1647e24e6\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\"],[\"São João\",\"Ponta Grossa\",\"Londrina\",\"Campo Mourão\",\"Cafelândia\",\"Santa Cruz do Sul\",\"Passo Fundo\",\"Lavras\",\"Rio Verde\",\"Silvânia\",\"Bandeirantes\",\"Maracajú\",\"Campo Verde\",\"Deciolândia\",\"Lucas Rio Verde\",\"Querência\",\"Primavera do Leste\",\"Sapezal\",\"Patrocíno Paulista\",\"Roda Velha\",\"Porto Nacional\"],[-25.8278,-25.0994,-23.3197,-24.0438,-24.6172,-29.7241,-28.2623,-21.2399,-17.7928,-16.6655,-19.918,-21.6304,-15.5454,-14.1838,-13.0764,-12.5943,-15.5571,-13.548,-20.6412,-12.7825,-10.7069],[-52.7237,-50.1583,-51.1662,-52.381,-53.3231,-52.4358,-52.4103,-44.9984,-50.9196,-48.6119,-54.3684,-55.1596,-55.1655,-57.5066,-55.9094,-52.2078,-54.2975,-58.8161,-47.2812,-45.9519,-48.4126],[1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,1,0,0,0,0,0,1,0,1,1,1,1,1,1,1,0,0,0],[1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Local<\\/th>\\n      <th>lat<\\/th>\\n      <th>lon<\\/th>\\n      <th>DFC<\\/th>\\n      <th>MA<\\/th>\\n      <th>FER<\\/th>\\n      <th>ANTR<\\/th>\\n      <th>OIDIO<\\/th>\\n      <th>ensaios<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3,4,5,6,7,8,9]},{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"Local\",\"targets\":1},{\"name\":\"lat\",\"targets\":2},{\"name\":\"lon\",\"targets\":3},{\"name\":\"DFC\",\"targets\":4},{\"name\":\"MA\",\"targets\":5},{\"name\":\"FER\",\"targets\":6},{\"name\":\"ANTR\",\"targets\":7},{\"name\":\"OIDIO\",\"targets\":8},{\"name\":\"ensaios\",\"targets\":9}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## Plot do mapa\nggplot(BRA) +\n  geom_sf(fill = \"gray70\", alpha = 0.5, color = \"white\") +\n  coord_sf()+\n  geom_scatterpie(aes(x = lon, y = lat, r = 0.6), alpha = 0.8, color = NA, data = incidencia_doenças_soja,\n                  cols = c(\"DFC\",\n                           \"MA\",\n                           \"FER\",\n                           \"ANTR\",\n                           \"OIDIO\"))+\n  geom_text_repel(data = incidencia_doenças_soja, aes(lon, lat, label = Local),\n                   size = 2, nudge_x = 0.2, nudge_y = 0.27, color = \"gray30\") +\n  scale_fill_calc()+\n  labs(x = \"Longitude\", y = \"Latitude\", legend = \"\", fill = \"Doença\", title = \"Incidência de Doenças da Soja no Brasil\", caption = \"Fonte: Leonardo Packer de Quadros\") +\n  theme(legend.position = \"bottom\", text = element_text(face = \"bold\", size = 12))\n```\n\n::: {.cell-output-display}\n![](Mapas_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## Mapas Interativos\n\nUtilização do pacote `leaflet`, com utilização as coordenadas\n\n## Mapa do município de Viçosa - MG\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet() |> \n  addTiles() |> \n  setView(lng = -42.8825 , lat = -20.7546, zoom = 15)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-a0cce22af9c1900494d5\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a0cce22af9c1900494d5\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]}],\"setView\":[[-20.7546,-42.8825],15,[]]},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Mapa regional com o município de Viçosa - MG ao centro\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet() |> \n  addProviderTiles(providers$Esri.NatGeoWorldMap) |> \n  setView(lng = -42.8825 , lat = -20.7546, zoom = 5)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-a1e32e4c0db5c37943a0\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a1e32e4c0db5c37943a0\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"Esri.NatGeoWorldMap\",null,null,{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false}]}],\"setView\":[[-20.7546,-42.8825],5,[]]},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Mapa com pontos nas coordenadas de Incidência de Ferrugem da Soja no Brasil\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet(sbr) |> \n  addTiles() |> \n  addCircleMarkers(radius = 2)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-9c0a030c167402f36993\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9c0a030c167402f36993\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[-23.0418,-24.0438,-15.5454,-13.3426,-13.3426,-25.3889,-29.2294,-12.0807,-12.0807,-23.3197,-23.3197,-23.3197,-21.6304,-17.4468,-25.4197,-25.4197,-25.4197,-28.2623,-26.2292,-22.741,-25.0996,-22.5373,-7.3649,-17.7896,-17.7896,-17.7896,-16.4655,-16.4655,-16.4655,-16.4655,-13.4474,-13.4474,-19.746,-19.746],[-50.0737,-52.3811,-55.1655,-44.6357,-44.6357,-51.4613,-53.6827,-45.7787,-45.7787,-51.1662,-51.1662,-51.1662,-55.1596,-51.1762,-50.0004,-50.0004,-50.0004,-52.4103,-52.6696,-47.1743,-50.1584,-55.7282,-46.6233,-50.9205,-50.9205,-50.9205,-54.6387,-54.6387,-54.6387,-54.6387,-56.7212,-56.7212,-47.934,-47.934],2,null,null,{\"interactive\":true,\"className\":\"\",\"stroke\":true,\"color\":\"#03F\",\"weight\":5,\"opacity\":0.5,\"fill\":true,\"fillColor\":\"#03F\",\"fillOpacity\":0.2},null,null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[-29.2294,-7.3649],\"lng\":[-56.7212,-44.6357]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-binding-2.2.2/leaflet.js\"></script>\n<script src=\"site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js\"></script>\n<script src=\"site_libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}