---
title: "Testes de Hipótese para dois Grupos"
format: html
editor: visual
execute: 
  error: false
  warning: false
---

Técnica estatística usada para tomar decisões ou inferências sobre uma população com base em uma amostra de dados. O objetivo do teste de hipótese é determinar se há evidências suficientes nos dados da amostra para rejeitar uma suposição específica sobre a população.Neste caso teremos dois grupos, sendo cada grupo uma amostra de uma população

## Testes Paramétricos

### Teste t

Usado para comparar as médias de dois grupos. Ele determina se as diferenças entre as médias dos dois grupos são estatisticamente significativas

#### Teste t não pareado

Quando os grupos são independentes.

```{r}
library(gsheet)

mg <- gsheet2tbl("https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit#gid=983033137")
mg

library(ggplot2)
library(r4pde)
```

##### Análise exploratória

```{r}
library (tidyverse)
theme_set(r4pde::theme_r4pde(font_size = 10))

mg|> 
  ggplot(aes(trat, comp))+ 
  geom_boxplot()
```

##### Realizando o teste t

```{r}
##passar do formato longo para largo 
mg2 <- mg |>
  pivot_wider(names_from = trat, 
              values_from = comp)

## Realizando o teste t
t.test (mg2$Mg2, mg2$control)
```

Houve diferença estatística, com p-valor\<0,05, aceitamos assim a hipótese alternativa.

##### Testar a normalidade e heterocedacidade dos dados

Para o test t ter validade a normalidade dos resíduos tem maior importância

```{r}
## normalidade dos resíduos
shapiro.test(mg2$control)

hist(mg2$control)

qqnorm(mg2$control)
qqline(mg2$control)

shapiro.test(mg2$Mg2)

qqnorm(mg2$Mg2)
qqline(mg2$Mg2)

hist(mg2$Mg2)

#teste de homogeneidade das variãncias 
var.test(mg2$control, mg2$Mg2)

```

##### Quando as variâncias são hogêneas

```{r}
t.test (mg2$Mg2, mg2$control, var.equal = TRUE)
#OU
t.test (mg2$Mg2, mg2$control)
```

Quando as variâncias não são homogêneas

```{r}
t.test (mg2$Mg2, mg2$control, var.equal = FALSE)
```

##### Relatório do teste t

```{r}
library(report)

teste_t_1 <- t.test (mg2$Mg2, mg2$control)

report(teste_t_1)
```

#### Teste t pareado

Quando os grupos são dependentes

```{r}
escala<- gsheet2tbl("https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit#gid=1729131173")

# exploração de dados 
escala|> 
  ggplot(aes(assessment, acuracia))+ 
  geom_boxplot() #houve significativamente melhor acurária com auxílio 

escala2 <- escala |>
  select( assessment, rater, acuracia) |> 
  pivot_wider(names_from = assessment, 
              values_from = acuracia)

## testando a normalidade e heterocedacidade
shapiro.test(escala2$Unaided)
shapiro.test(escala2$Aided1)

var.test(escala2$Unaided, escala2$Aided1)

# podemos proceder com teste paramétrico mesmo as variâncias não sendo heterogêneas 
t.test (escala2$Unaided, escala2$Aided1, paired = TRUE, 
        var.equal = FALSE)# regeito a hipótese nula, há diferença entre os tratamentos (p-valor<0,05) 
```

## Teste não paramétrico

### Teste de wilcox

```{r}
escala <- gsheet2tbl("https://docs.google.com/spreadsheets/d/1bq2N19DcZdtax2fQW9OHSGMR0X2__Z9T/edit#gid=1729131173")
escala 

escala2 <- escala |>
  select( assessment, rater, acuracia) |> 
  pivot_wider(names_from = assessment, 
              values_from = acuracia)

## testando a normalidade e heterocedacidade
shapiro.test(escala2$Unaided)## dados não paramétricos
shapiro.test(escala2$Aided1) 

## Teste de Wilcox
wilcox.test(escala2$Aided1, escala2$Unaided, paired = TRUE) # regeito a hipótese nula, há diferença entre os tratamentos (p-valor<0,05)


```
